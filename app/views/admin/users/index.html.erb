<% provide :title, t("users") %>
<h1><%= t "users"  %></h1>
<div class="search-form">
  <%= search_form_for [:admin, @q] do |f| %>
    <div class="field">
      <%= f.text_field :name_cont, class: "form-control",
        placeholder: t("admin.users.search_placeholer") %>
    </div>
  <% end %>
</div>
<table class="table table-hover" id="list_user">
  <thead class="title_table">
    <tr class="info">
      <th class="user_name"><%= t "admin.users.td_index" %></th>
      <th class="user_name"><%= t "admin.users.td_Avatar" %></th>
      <th class="user_name"><%= t "admin.users.td_name" %></th>
      <th class="user_email"><%= t "admin.users.td_email" %></th>
      <th class="center"><%= t "admin.users.td_delete" %></th>
    </tr>
  </thead>
  <tbody>
    <% @users.each.with_index do |user, index| %>
      <tr>
        <td>
          <%= index_in_list index, Settings.per_page %>
        </td>
        <td>
          <%= image_tag(get_avatar_in_user(user), size: Settings.users.size) %>
        </td>
        <td><%= link_to user.name, user %></td>
        <td><%= user.email %></td>
        <td class="center">
          <% if can?(:manage, :all) && current_user != user %>
            <%= link_to "", [:admin, user],
              method: :delete, data: {confirm: t("admin.users.delete_confirm")},
            class: "glyphicon glyphicon-remove text-danger" %>
          <% end %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>
<div class="page center">
  <%= paginate @users %>
</div>
